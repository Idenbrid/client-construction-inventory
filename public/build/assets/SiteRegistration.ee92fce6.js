import{_ as f,a as c,o as l,c as a,b as e,d as _,f as h,t as r,e as m,F as g,r as p}from"./app.fe49b883.js";const v={data(){return{site:{job_number:"",site_name:"",id:0},errors:[],list:[]}},created(){this.getList()},methods:{editSite(t){this.site.id=t.id,this.site.job_number=t.job_number,this.site.site_name=t.site_name},handleSave(){Swal.fire({text:"Please Wait...",didOpen:()=>{Swal.showLoading()}}),c.post("/api/site",this.site).then(t=>{t.data.success==!1?(Swal.close(),this.errors=t.data.errors):(Swal.close(),this.clear(),this.errors=[],Swal.fire({icon:"success",title:"Site has been registered successfully."}),this.getList())})},handleUpdate(){Swal.fire({text:"Please Wait...",didOpen:()=>{Swal.showLoading()}}),c.patch("/api/site/update",this.site).then(t=>{t.data.success==!1?(Swal.close(),this.errors=t.data.errors):(Swal.close(),this.clear(),this.errors=[],Swal.fire({icon:"success",title:"Site has been updated successfully."}),this.getList())})},clear(){this.site={job_number:"",site_name:"",id:0},this.errors=[]},getList(){c.get("/api/site").then(t=>{this.list=t.data})},deleteSite(t){Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&c.delete("/api/site/"+t).then(d=>{d.data.success==!0?(Swal.fire("Deleted!","Your data has been deleted.","success"),this.getList()):d.data.message=="inUse"?(Swal.close(),Swal.fire({icon:"info",title:"Warehouse can't delete because its in use."})):Swal.fire("Error!","Site not found. Please reload the page and try agian. Thanks","error")})})}}},S={class:"section-registration"},w={class:"container-fluid p-0"},k={class:"main-content main-content-bg"},y=e("div",{class:"advance-master-registration-title"},[e("h5",{class:"content-h1"},"JOB\u756A\u53F7\u30FB\u73FE\u5834\u540D\u767B\u9332")],-1),B={class:"master-registration-form"},C={class:"master-reg-row"},x={class:"master-reg-form"},j={class:"account-input-content"},L=e("div",{class:"account-reg-lablel"},[e("label",null,"JOB\u756A\u53F7")],-1),O={class:"account-reg-input"},J={key:0,class:"text-danger float-left"},U={class:"account-input-content"},V=e("div",{class:"account-reg-lablel"},[e("label",null,"\u73FE\u5834\u540D")],-1),D={class:"account-reg-input"},P={key:0,class:"text-danger float-left"},T={class:"register-buttons"},W={key:0},Y={key:1},E={class:"table-col"},F={class:"master-registration-right-contet"},N={class:"registration-table"},q=e("thead",null,[e("tr",{class:"f-12-regular"},[e("th",null,"#"),e("th",null,"JOB\u756A\u53F7"),e("th",null,"\u73FE\u5834\u540D"),e("th")])],-1),A={class:"btn-grouped"},M=["onClick"],R=e("i",{class:"fa-solid fa-trash-can delete-icon"},null,-1),z=[R],G=["onClick"],H=e("i",{class:"fa-solid fa-pen-to-square edit-icon"},null,-1),I=[H];function K(t,s,d,Q,n,o){return l(),a("section",S,[e("div",w,[e("div",k,[y,e("div",B,[e("div",C,[e("div",x,[e("div",j,[L,e("div",O,[_(e("input",{class:"master-reg-input","onUpdate:modelValue":s[0]||(s[0]=i=>n.site.job_number=i),type:"number",name:"JOB\u756A\u53F7",min:"0",id:"JOB\u756A\u53F7",placeholder:"\u30C6\u30AD\u30B9\u30C8"},null,512),[[h,n.site.job_number]]),e("small",null,[n.errors.job_number!=null?(l(),a("span",J,r(n.errors.job_number[0]),1)):m("",!0)])])]),e("div",U,[V,e("div",D,[_(e("input",{class:"master-reg-input","onUpdate:modelValue":s[1]||(s[1]=i=>n.site.site_name=i),type:"text",name:"\u73FE\u5834\u540D",id:"\u73FE\u5834\u540D",placeholder:"\u30C6\u30AD\u30B9\u30C8"},null,512),[[h,n.site.site_name]]),e("small",null,[n.errors.site_name!=null?(l(),a("span",P,r(n.errors.site_name[0]),1)):m("",!0)])])]),e("div",T,[n.site.id==0?(l(),a("div",W,[e("a",{class:"register-btn",onClick:s[2]||(s[2]=i=>o.handleSave())},"\u767B\u9332")])):(l(),a("div",Y,[e("a",{class:"update-btn",onClick:s[3]||(s[3]=i=>o.handleUpdate())},"\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8")])),e("div",null,[e("a",{class:"clear-btn",onClick:s[4]||(s[4]=i=>o.clear())},"\u524A\u9664")])])]),e("div",E,[e("div",F,[e("table",N,[q,e("tbody",null,[(l(!0),a(g,null,p(n.list,(i,u)=>(l(),a("tr",{class:"f-12-regular",key:u},[e("td",null,r(u+1),1),e("td",null,r(i.job_number),1),e("td",null,r(i.site_name),1),e("td",null,[e("div",A,[e("a",{class:"btn",onClick:b=>o.deleteSite(i.id)},z,8,M),e("a",{class:"btn",onClick:b=>o.editSite(i)},I,8,G)])])]))),128))])])])])])])])])])}const Z=f(v,[["render",K]]);export{Z as default};
