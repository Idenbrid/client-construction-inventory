import{_ as y,a as r,o as n,c as l,b as e,F as c,r as u,w as h,d as m,f as g,v,t as i,e as p,g as k,h as w,n as S,i as j,j as x,k as C}from"./app.07cafa55.js";const O={data(){return{list:[],record:{order_id:"",amount:""},order:{job_number:{},site_name:"",order_date:"",client_id:"",item_id:"",stocker_id:"",amount:"",order_id:""},sites:[],items:[],warehouses:[],users:[],errors:[],reserveOrders:[]}},created(){this.getRemainingList(),this.getWarehouse(),this.getSettings()},methods:{clearForm(){this.record={order_id:"",amount:""},this.order={job_number:{},site_name:"",order_date:"",client_id:"",item_id:"",stocker_id:"",amount:"",order_id:""}},assignValue(s){this.record.amount=s.remaining,this.record.order_id=s.id,this.order.order_id=s.id,this.order.item_id=s.item.id,this.order.stocker_id=s.stocker.id},reserveOrder(){if(this.order.amount>this.record.amount)return Swal.fire({icon:"info",title:"Amount should be less then remaining amount!"}),!1;r.post("/api/reserve-order",this.order).then(s=>{s.data.success==!1?(Swal.close(),Swal.fire({icon:"error",title:"Something went wrong please reload the page and try again. Thanks"}),this.record={warehouse_id:"",order_id:"",amount:""}):(Swal.close(),Swal.fire({icon:"success",title:"Order has been updated successfully."}),this.clearForm(),this.getRemainingList(),$("#carryout").modal("hide"))}).error(s=>{Swal.fire({icon:"error",title:"Something went wrong please reload the page and try again. Thanks"})})},getReservedOrders(s){r.get("/api/get-related-reserve-orders/"+s).then(a=>{this.reserveOrders=a.data})},getSettings(){r.get("/api/get-settings").then(s=>{this.sites=s.data.sites,this.items=s.data.items,this.users=s.data.users,this.warehouses=s.data.warehouses})},getWarehouse(){r.get("/api/warehouse").then(s=>{this.warehouse=s.data})},getRemainingList(){r.get("/api/get-remaining-list").then(s=>{this.list=s.data,this.list.length>0&&$(document).ready(function(){$("#inventory_list_table").DataTable({columnDefs:[{width:"90px",targets:[0,1,2,3,4,5,6,7,8]}],searching:!1,info:!1,autoWidth:!1,lengthChange:!1})})})},reserveToUsing(s){r.post("/api/reserve-to-using",s).then(a=>{a.data.success==!1?(Swal.close(),Swal.fire({icon:"error",title:"Something went wrong please reload the page and try again. Thanks"})):(Swal.close(),Swal.fire({icon:"success",title:"Order has been updated successfully."}),$("#booking-confirmation").modal("hide"))}).error(a=>{Swal.fire({icon:"error",title:"Something went wrong please reload the page and try again. Thanks"})})}}},V={class:"container-fluid p-0"},T={class:"main-content main-content-bg"},L=e("h1",{class:"content-h1"},"5. \u5728\u5EAB\u4E00\u89A7",-1),N={class:"table-card table-responsive-sm"},U={id:"inventory_list_table",class:"table table-striped custom-table-list nowrap"},B=e("thead",null,[e("tr",null,[e("th",null,"\u767A\u6CE8\u5E74\u6708\u65E5"),e("th",null,"\u767A\u6CE8\u8005"),e("th",null,"\u5206\u985E"),e("th",null,"\u30E1\u30FC\u30AB\u30FC"),e("th",null,"\u54C1\u540D"),e("th",null,"\u578B\u756A"),e("th",null,"\u6570\u91CF"),e("th",null,"remaining"),e("th",null,"\u30B8\u30E7\u30D6\u756A\u53F7"),e("th")])],-1),D={class:"btn-rev-del ml-0"},F=["onClick"],R=["onClick"],J=e("a",{type:"button",class:"copy-content-btn disabled",value:"\u767B\u9332","data-toggle":"modal","data-target":"#stockfix"},"\u5728\u5EAB\u4FEE\u6B63",-1),M={class:"modal fade",id:"carryout","data-backdrop":"carryout","data-keyboard":"false",tabindex:"-1","aria-labelledby":"carryoutLabel","aria-hidden":"true"},W={class:"modal-dialog modal-dialog-centered"},A={class:"modal-content"},z={class:"modal-header border-0"},E=e("span",{"aria-hidden":"true"},"\xD7",-1),I=[E],q={class:"modal-body"},G={class:"form-fields justify-content-center"},H=e("div",{class:"register-label align-items-center"},"order date",-1),K={class:"date"},P={class:"form-fields justify-content-center mt-3"},Q=e("div",{class:"register-label align-items-center"},"JOB\u756A\u53F7",-1),X=["value"],Y={key:0,class:"text-danger float-left"},Z={class:"form-fields justify-content-center mt-3"},ee=e("div",{class:"register-label align-items-center"},"\u73FE\u5834\u540D",-1),te=["value"],se={class:"form-fields justify-content-center mt-3"},oe=e("div",{class:"register-label align-items-center"},"\u767A\u6CE8\u8005\uFF08\u9078\u629E\uFF09",-1),ae=["value"],ie={key:0,class:"text-danger float-left"},ne={class:"form-fields justify-content-center mt-3"},le=e("div",{class:"register-label align-items-center"},"\u6570\u91CF",-1),re={class:"modal-footer border-0 justify-content-center pb-4"},de={class:"modal fade",id:"booking-confirmation","data-backdrop":"booking-confirmation","data-keyboard":"false",tabindex:"-1","aria-labelledby":"booking-confirmationLabel","aria-hidden":"true"},ce={class:"modal-dialog modal-dialog-centered modal-lg"},ue={class:"modal-content"},me=e("div",{class:"modal-header border-0"},[e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"\xD7")])],-1),_e={class:"modal-body pt-0"},he={class:"booking-content"},be={class:"w-100"},ge=e("thead",null,[e("tr",null,[e("th",null,"\u4F7F\u7528\u5E74\u6708\u65E5"),e("th",null,"\u4F7F\u7528\u8005"),e("th",null,"\u6570\u91CF"),e("th",null,"JOB\u756A\u53F7"),e("th",null,"\u73FE\u5834\u540D")])],-1),ve={class:"btn-rev-del"},pe=["onClick"],fe=e("a",{type:"button",class:"revision-btn",value:"\u767B\u9332"},"\u4FEE\u6B63",-1),ye=k('<div class="modal fade" id="stockfix" data-backdrop="stockfix" data-keyboard="false" tabindex="-1" aria-labelledby="stockfixLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header border-0"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">\xD7</span></button></div><div class="modal-body"><div class="form-fields justify-content-center"><div class="register-label align-items-center">\u7F6E\u304D\u5834\u767B\u9332</div><select class="input-border" name="cars" id="cars"><option value="volvo">Volvo</option><option value="saab">Saab</option><option value="opel">Opel</option><option value="audi">Audi</option></select></div><div class="form-fields justify-content-center mt-3"><div class="register-label align-items-center">\u6570\u91CF</div><input type="text" class="form-control" placeholder="\u30C6\u30AD\u30B9\u30C8"></div></div><div class="modal-footer border-0 justify-content-center"><button type="button" class="complete-btn" data-dismiss="modal">\u5728\u5EAB\u767B\u9332</button></div></div></div></div>',1);function ke(s,a,we,Se,o,d){const f=w("t");return n(),l("div",V,[e("div",T,[L,e("div",N,[e("table",U,[B,e("tbody",null,[(n(!0),l(c,null,u(o.list,(t,_)=>(n(),l("tr",{key:_},[e("td",null,i(t.order_date),1),e("td",null,i(t.orderer.user_name),1),e("td",null,i(t.item.category),1),e("td",null,i(t.item.manufacturer),1),e("td",null,i(t.item.item_name),1),e("td",null,i(t.item.item_number),1),e("td",null,i(t.amount),1),e("td",null,i(t.remaining),1),e("td",null,i(t.job.job_number),1),e("td",null,[e("div",D,[e("a",{type:"button",class:"carryout-btn",value:"\u767B\u9332","data-toggle":"modal",onClick:b=>d.assignValue(t),"data-target":"#carryout"},"\u6301\u51FA\u3057\u4E88\u7D04",8,F),e("a",{type:"button",class:"revision-btn",value:"\u767B\u9332","data-toggle":"modal",onClick:b=>d.getReservedOrders(t.id),"data-target":"#booking-confirmation"},"\u4E88\u7D04\u78BA\u8A8D",8,R),J])])]))),128))])])]),e("div",M,[e("div",W,[e("div",A,[e("div",z,[e("button",{type:"button",onClick:a[0]||(a[0]=h(t=>d.clearForm(),["prevent"])),class:"close","data-dismiss":"modal","aria-label":"Close"},I)]),e("div",q,[e("div",G,[H,e("div",K,[m(e("input",{type:"date",id:"date","onUpdate:modelValue":a[1]||(a[1]=t=>o.order.order_date=t),name:"datebirth",class:"form-control input-border"},null,512),[[g,o.order.order_date]])])]),e("div",P,[Q,m(e("select",{class:"input-border",name:"cars",id:"cars","onUpdate:modelValue":a[2]||(a[2]=t=>o.order.job_number=t)},[(n(!0),l(c,null,u(o.sites,t=>(n(),l("option",{value:t},i(t.job_number),9,X))),256))],512),[[v,o.order.job_number]]),e("small",null,[o.errors.job_number!=null?(n(),l("span",Y,i(o.errors.job_number[0]),1)):p("",!0)])]),e("div",Z,[ee,e("input",{type:"text",disabled:"",value:o.order.site_name=o.order.job_number.site_name,class:"form-control",placeholder:"\u30C6\u30AD\u30B9\u30C8"},null,8,te)]),e("div",se,[oe,m(e("select",{class:"input-border","onUpdate:modelValue":a[3]||(a[3]=t=>o.order.client_id=t),name:"cars",id:"cars"},[(n(!0),l(c,null,u(o.users,t=>(n(),l("option",{value:t.id},i(t.user_name),9,ae))),256))],512),[[v,o.order.client_id]]),e("small",null,[o.errors.client_id!=null?(n(),l("span",ie,i(o.errors.client_id[0]),1)):p("",!0)])]),e("div",ne,[le,m(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[4]||(a[4]=t=>o.order.amount=t),placeholder:"\u30C6\u30AD\u30B9\u30C8"},null,512),[[g,o.order.amount]])])]),e("div",re,[e("button",{type:"button",onClick:a[5]||(a[5]=h(t=>d.reserveOrder(),["prevent"])),class:"complete-btn"},"\u767B\u9332")])])])]),e("div",de,[e("div",ce,[e("div",ue,[me,e("div",_e,[e("div",he,[e("table",be,[ge,e("tbody",null,[(n(!0),l(c,null,u(o.reserveOrders,(t,_)=>(n(),l("tr",{key:_,style:S(t.order_date<=new Date().toJSON().slice(0,10).replace(/-/g,"-")?"background:#f1d2d2":"")},[j(f,null,{default:x(()=>[C(i(t.order_date),1)]),_:2},1024),e("td",null,i(t.orderer.user_name),1),e("td",null,i(t.amount),1),e("td",null,i(t.job.job_number),1),e("td",null,[e("div",ve,[e("a",{type:"button",class:"taking-out-btn",value:"\u767B\u9332",onClick:h(b=>d.reserveToUsing(t),["prevent"])},"\u6301\u3061\u51FA\u3057",8,pe),fe])])],4))),128))])])])])])])]),ye])])}const xe=y(O,[["render",ke]]);export{xe as default};
