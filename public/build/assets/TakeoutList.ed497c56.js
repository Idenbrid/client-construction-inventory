import{_ as f,a as r,o as i,c as o,b as e,F as u,r as h,d as _,v as b,f as p,w as m,t as l}from"./app.07cafa55.js";const w={data(){return{list:[],warehouse:[],record:{warehouse_id:"",order_id:"",amount:""}}},created(){this.getUsedList(),this.getWarehouse()},methods:{cancleOrder(s){r.get("/api/cancle-move-to-delivered/"+s).then(a=>{a.data.success==!1?(Swal.close(),Swal.fire({icon:"error",title:"Something went wrong please reload the page and try again. Thanks"})):(Swal.close(),Swal.fire({icon:"success",title:"Order has been updated successfully."}),this.getUsedList())}).error(a=>{Swal.fire({icon:"error",title:"Something went wrong please reload the page and try again. Thanks"})})},saveRemaining(){r.post("/api/save-remaining",this.record).then(s=>{s.data.success==!1?s.data.message=="amount"?(Swal.close(),Swal.fire({icon:"info",title:"Amount should be less then ordered amount!"})):(Swal.close(),Swal.fire({icon:"error",title:"Please Select required information."})):(Swal.close(),Swal.fire({icon:"success",title:"Order has been updated successfully."}),this.record={warehouse_id:"",amount:""},this.getUsedList(),$("#reminder").modal("hide"))}).error(s=>{Swal.fire({icon:"error",title:"Something went wrong please reload the page and try again. Thanks"})})},allUsed(s){r.get("/api/all-used/"+s).then(a=>{a.data.success==!1?(Swal.close(),Swal.fire({icon:"error",title:"Something went wrong please reload the page and try again. Thanks"})):(Swal.close(),Swal.fire({icon:"success",title:"Order has been updated successfully."}),this.getUsedList())}).error(a=>{Swal.fire({icon:"error",title:"Something went wrong please reload the page and try again. Thanks"})})},getWarehouse(){r.get("/api/warehouse").then(s=>{this.warehouse=s.data})},getUsedList(){r.get("/api/get-orders-used-using").then(s=>{this.list=s.data,this.list.length>0&&$(document).ready(function(){$("#waiting_list_table").DataTable({columnDefs:[{width:"90px",targets:[0,1,2,3,4,5,6,7,8]}],searching:!1,info:!1,autoWidth:!1,lengthChange:!1})})})}}},v={class:"container-fluid p-0"},y={class:"main-content main-content-bg"},S=e("h1",{class:"content-h1"},"4. \u6301\u3061\u51FA\u3057\u4E2D\u4E00\u89A7",-1),k={class:"table-card table-responsive-sm"},x={id:"waiting_list_table",class:"table custom-table-list"},C=e("thead",null,[e("tr",null,[e("th",null,"\u767A\u6CE8\u5E74\u6708\u65E5"),e("th",null,"\u767A\u6CE8\u8005"),e("th",null,"\u5206\u985E"),e("th",null,"\u30E1\u30FC\u30AB\u30FC"),e("th",null,"\u54C1\u540D"),e("th",null,"\u578B\u756A"),e("th",null,"\u6570\u91CF"),e("th",null,"\u30B8\u30E7\u30D6\u756A\u53F7"),e("th",null,"\u73FE\u5834\u540D"),e("th")])],-1),U={class:"d-flex",style:{width:"max-content"}},L={key:0,class:"btn-rev-del"},T=["onClick"],j=["onClick"],O=["onClick"],D={key:1,class:"btn-rev-del"},B=e("a",{class:"delivery-btn"},"\u6301\u3061\u51FA\u3057\u5B8C\u4E86",-1),M=[B],V={class:"modal fade",id:"reminder","data-backdrop":"static","data-keyboard":"false",tabindex:"-1","aria-labelledby":"reminderLabel","aria-hidden":"true"},W={class:"modal-dialog modal-dialog-centered"},F={class:"modal-content"},R=e("div",{class:"modal-header border-0"},[e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"\xD7")])],-1),q={class:"modal-body"},A={class:"form-fields justify-content-center"},E=e("div",{class:"register-label align-items-center",bis_skin_checked:"1"},"\u7F6E\u304D\u5834\u767B\u9332",-1),N=["value"],P={class:"form-fields justify-content-center mt-3"},z=e("div",{class:"register-label align-items-center",bis_skin_checked:"1"},"\u6570\u91CF",-1),G={class:"modal-footer border-0 justify-content-center"};function H(s,a,I,J,n,d){return i(),o("div",v,[e("div",y,[S,e("div",k,[e("table",x,[C,e("tbody",null,[(i(!0),o(u,null,h(n.list,(t,g)=>(i(),o("tr",{key:g},[e("td",null,l(t.order_date),1),e("td",null,l(t.orderer.user_name),1),e("td",null,l(t.item.category),1),e("td",null,l(t.item.manufacturer),1),e("td",null,l(t.item.item_name),1),e("td",null,l(t.item.item_number),1),e("td",null,l(t.amount),1),e("td",null,l(t.job.job_number),1),e("td",null,l(t.job.site_name),1),e("td",U,[t.status!="used"?(i(),o("div",L,[e("a",{type:"button",onClick:c=>d.allUsed(t.id),class:"delivery-btn",value:"\u767B\u9332"},"\u4F7F\u3044\u7D42\u308A",8,T),e("a",{type:"button",onClick:m(c=>n.record.order_id=t.id,["prevent"]),class:"revision-btn",value:"\u767B\u9332","data-toggle":"modal","data-target":"#reminder"},"\u4F59\u308A",8,j),e("a",{type:"button",class:"copy-content-btn disabled",onClick:c=>d.cancleOrder(t.id),value:"\u767B\u9332"},"\u53D6\u6D88",8,O)])):(i(),o("div",D,M))])]))),128))])])]),e("div",V,[e("div",W,[e("div",F,[R,e("div",q,[e("div",A,[E,_(e("select",{class:"input-border","onUpdate:modelValue":a[0]||(a[0]=t=>n.record.warehouse_id=t),name:"cars",id:"cars"},[(i(!0),o(u,null,h(n.warehouse,t=>(i(),o("option",{value:t.id},l(t.warehouse_name),9,N))),256))],512),[[b,n.record.warehouse_id]])]),e("div",P,[z,_(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=t=>n.record.amount=t),placeholder:"\u30C6\u30AD\u30B9\u30C8"},null,512),[[p,n.record.amount]])])]),e("div",G,[e("button",{type:"button",onClick:a[2]||(a[2]=m(t=>d.saveRemaining(),["prevent"])),class:"complete-btn"},"\u7D0D\u54C1\u6E08\u307F")])])])])])])}const Q=f(w,[["render",H]]);export{Q as default};
